<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>CASE TRIAGE CONSOLE ‚Äî Home</title>
<style>
:root{
  --brand-cyan:#1fd1ff; --brand-blue:#0a66ff; --brand-deep:#003fe0;
  --bg:#061a3a; --panel:#0a234f; --text:#f1f7ff; --muted:#b9d3ff;
}
*{box-sizing:border-box} body{margin:0;font-family:Inter,Segoe UI,system-ui,Arial,sans-serif;background:var(--bg);color:var(--text)}
.header{position:sticky;top:0;z-index:2;display:flex;align-items:center;gap:14px;padding:10px 16px;border-bottom:1px solid rgba(255,255,255,.06);
  background:radial-gradient(900px 340px at 0% 0%, rgba(31,209,255,.38), transparent 60%),radial-gradient(900px 340px at 100% 100%, rgba(10,102,255,.35), transparent 60%),linear-gradient(135deg, var(--brand-blue) 0%, var(--brand-deep) 60%);}
.logoWrap{width:36px;height:36px;border-radius:8px;overflow:hidden;display:flex;align-items:center;justify-content:center;box-shadow:0 4px 14px rgba(10,102,255,.28)}
.title{font-size:20px;font-weight:700;letter-spacing:.3px}
.badge{background:rgba(255,255,255,.08);border:1px solid rgba(31,209,255,.45);padding:2px 8px;border-radius:999px;font-size:12px}
.brand-hero{height:44px;background:radial-gradient(800px 300px at 10% 0%, rgba(31,209,255,.35), transparent 55%),radial-gradient(900px 340px at 90% 120%, rgba(10,102,255,.30), transparent 60%),linear-gradient(135deg, var(--brand-blue), var(--brand-deep));border-bottom:1px solid rgba(255,255,255,.06);display:flex;align-items:center;padding:0 18px;font-size:12px;opacity:.9}
.main{display:grid;grid-template-columns:260px 1fr;gap:16px;padding:16px 20px;min-height:calc(100vh - 68px)}
.sidebar{background:#0a234f;border:1px solid rgba(255,255,255,.08);border-radius:14px;padding:10px;height:fit-content;position:sticky;top:92px}
.menuBtn{display:flex;gap:10px;align-items:center;width:100%;background:rgba(255,255,255,.02);border:1px solid rgba(255,255,255,.08);color:var(--text);
  padding:10px;border-radius:10px;margin:6px 0;cursor:pointer;text-align:left;}
.menuBtn.active{border-color: rgba(31,209,255,.65);box-shadow:0 0 0 2px rgba(31,209,255,.18) inset, 0 4px 14px rgba(10,102,255,.2);
  background:linear-gradient(135deg, rgba(31,209,255,.08), rgba(10,102,255,.08));}
.panel{background:#0a234f;border:1px solid rgba(255,255,255,.08);border-radius:14px;padding:14px;margin-bottom:16px}
.row{display:flex;gap:12px;flex-wrap:wrap}
.input, textarea, select{background:#0b152d;border:1px solid #2a4fa2;color:#d7e6ff;border-radius:10px;padding:10px;font:inherit}
.btn{background:linear-gradient(135deg, var(--brand-cyan), var(--brand-blue));color:#fff;border:none;border-radius:10px;padding:10px 14px;cursor:pointer}
.btn.secondary{background:#475569}
.btn.ghost{background:transparent;border:1px solid #2a4fa2}
.notice{display:flex;gap:8px;align-items:center;background:#132d6a;border:1px solid #295cce;color:#d8e9ff;padding:8px 10px;border-radius:10px;font-size:12px}
.notice:before{content:"‚ö†Ô∏è"}
.small{font-size:12px;opacity:.9}
.twoCol{display:grid;grid-template-columns:1fr 1fr;gap:12px}
.table{width:100%;border-collapse:collapse;margin-top:8px}
.table th,.table td{border:1px solid rgba(255,255,255,.12);padding:8px;vertical-align:top}
.table th{background:rgba(255,255,255,.06)}
a{color:#9ec5ff}
@media (max-width:960px){.main{grid-template-columns:1fr}.twoCol{grid-template-columns:1fr}.sidebar{position:static}}
.iframeBox iframe{width:100%; height:560px; border:0; border-radius:10px;}
</style>
</head>
<body>
<header class="header">
  <div class="logoWrap">
    <svg viewBox="0 0 64 64" width="36" height="36" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Dayforce">
      <defs><linearGradient id="g" x1="0" y1="0" x2="1" y2="1"><stop offset="0" stop-color="#0a66ff"/><stop offset="1" stop-color="#1fd1ff"/></linearGradient></defs>
      <rect width="64" height="64" rx="8" fill="url(#g)"/><text x="18" y="50" font-size="48" font-weight="800" font-family="Inter, Segoe UI, Arial, sans-serif" fill="#fff">d</text>
    </svg>
  </div>
  <div class="title">CASE TRIAGE CONSOLE</div>
  <span class="badge">Home</span>
  <div style="margin-left:auto" class="small">Dayforce blue ‚Äî bright header & buttons, readable dark UI</div>
</header>
<div class="brand-hero">Point every case to the best path.</div>

<section class="main">
  <aside class="sidebar">
    <button class="menuBtn active" data-view="home">üè† Home</button>
    <button class="menuBtn" data-view="cav">üß≠ Correct Routing (Queue Compass)</button>
    <button class="menuBtn" data-view="probing">üí¨ Probing Questions</button>
    <button class="menuBtn" data-view="notes">üìù Internal Notes</button>
    <button class="menuBtn" data-view="kb">üìö KB Search</button>
    <button class="menuBtn" data-view="feedback">üí° Feedback</button>
    <div class="panel small" style="margin-top:8px">This page is static. Admins configure endpoints via <code>localStorage</code>. Users do not sign in.</div>
  </aside>

  <main class="content">
    <!-- HOME -->
    <div id="view-home" class="panel">
      <h2 style="margin:6px 0 10px 0">Welcome, Triage Team! üëã</h2>
      <div class="notice">Always review internal notes and probing QQs suggestions before sending to client.</div>
      <p style="margin:10px 0 0 0">Pick a workflow to get started.</p>

      <div class="twoCol" style="margin-top:12px">
        <div class="panel" style="margin:0">
          <h3>üß≠ Correct Routing (Queue Compass)</h3>
          <p class="small">Get a recommended queue, probing questions, and internal note template (Always review before using).</p>
          <button class="btn" onclick="go('cav')">Open</button>
        </div>
        <div class="panel" style="margin:0">
          <h3>üìö KB Search (Excel + PDF)</h3>
          <p class="small">Opens your existing search (tmc_user_g). You can keep using the public cache link.</p>
          <a id="kbLink" class="btn ghost" href="#" target="_blank">Open KB Search</a>
          <div class="small" style="margin-top:6px">Admin can set: <code>localStorage.setItem('tmc_kb_url','...')</code></div>
        </div>
        <div class="panel" style="margin:0">
          <h3>üí¨ Probing Question Banks</h3>
          <p class="small">Module-specific questions to qualify issues quickly. (Always review before using)</p>
          <button class="btn secondary" onclick="go('probing')">Browse</button>
        </div>
        <div class="panel" style="margin:0">
          <h3>üìù Internal Notes Formatter</h3>
          <p class="small">Generate clean, consistent internal notes ready to paste into your case. (Always review before using)</p>
          <button class="btn secondary" onclick="go('notes')">Use formatter</button>
        </div>
      </div>
    </div>

    <!-- ROUTING (exists so JS doesn't fail) -->
    <div id="view-cav" class="panel" style="display:none">
      <h2>üß≠ Correct Routing (Queue Compass)</h2>
      <div class="twoCol">
        <div class="panel" style="margin:0">
          <h3>Describe the case</h3>
          <div class="row">
            <div style="flex:1">
              <label class="small">Module</label><br>
              <select id="modSelect" class="input"></select>
            </div>
            <div style="width:160px">
              <label class="small">Urgency</label><br>
              <select id="urgency" class="input">
                <option value="normal">Normal</option>
                <option value="high">High</option>
                <option value="critical">Critical</option>
              </select>
            </div>
          </div>
          <label class="small" style="display:block;margin-top:8px">Issue summary</label>
          <textarea id="summary" placeholder="e.g., Candidate invite emails aren‚Äôt going out after interview is scheduled."></textarea>
          <div class="small" style="margin-top:8px">Common symptoms (optional)</div>
          <div id="symptoms" class="row" style="margin-top:4px"></div>
          <div class="row" style="margin-top:10px">
            <button class="btn" onclick="suggestRoute()">Suggest queue</button>
            <button class="btn" onclick="generateProbes()">AI: Suggest probing questions</button>
            <button class="btn ghost" onclick="clearCav()">Clear</button>
          </div>
        </div>
        <div class="panel" style="margin:0">
          <h3>Recommendation</h3>
          <div id="routeBox" class="small" style="opacity:.9">Fill the form and click <em>Suggest queue</em>.</div>
          <div id="altBox" class="small" style="margin-top:8px"></div>
          <h3 style="margin-top:12px">Probing questions</h3>
          <ul id="probeList" class="small"></ul>
          <h3 style="margin-top:12px">AI probing suggestions</h3>
          <ul id="aiProbeList" class="small"></ul>
          <div id="aiProbeMeta" class="small" style="opacity:.85;margin-top:6px"></div>
        </div>
      </div>
    </div>

    <!-- PROBING + FEEDBACK placeholders (so JS is safe even if not used) -->
    <div id="view-probing" class="panel" style="display:none">
      <h2>üí¨ Probing Question Banks</h2>
      <div class="small">Coming soon ‚Äî module banks, CSV import, and AI suggestions.</div>
      <div class="row" style="margin-top:10px"><button class="btn ghost" onclick="go('home')">Back</button></div>
    </div>
    <div id="view-notes" class="panel" style="display:none"><h2>üìù Internal Notes</h2><p class="small">Coming soon.</p></div>
    <div id="view-kb" class="panel" style="display:none"><h2>üìö KB Search</h2><p class="small">Use the Home tile to open your KB search.</p></div>
    <div id="view-feedback" class="panel" style="display:none"><h2>üí° Feedback</h2><p class="small">Coming soon.</p></div>
  </main>
</section>

<script>
// ---- safe helpers ----
function el(id){ return document.getElementById(id); }
function on(q,ev,fn){ const n=document.querySelector(q); if(n) n.addEventListener(ev,fn); }

// ---- nav ----
function go(view){
  document.querySelectorAll('.menuBtn').forEach(b=>b.classList.toggle('active', b.dataset.view===view || (view==='home'&&b.dataset.view==='home')));
  ['home','cav','probing','notes','kb','feedback'].forEach(v=>{ const pane = el('view-'+v); if(pane) pane.style.display = (v===view?'block':'none'); });
}
document.querySelectorAll('.menuBtn').forEach(b=>b.addEventListener('click', ()=>go(b.dataset.view)));

// ---- KB link (defensive) ----
(function(){ const a = el('kbLink'); const url = localStorage.getItem('tmc_kb_url')||''; if(a){ a.href = url || 'tmc_user_g.html'; } })();

// ---- minimal routing demo (defensive) ----
const routingRules=[{module:'Recruiting',signals:['interview','schedule','calendar','invite'],queue:'Recruiting > Interview Scheduling',probing:['Which req?','Which candidate(s)?','Which interviewer(s)?','Connected calendar?']},
                    {module:'Compensation',signals:['merit','matrix','guidelines'],queue:'Compensation > Merit',probing:['Which cycle?','How many impacted?']}];

(function initCAV(){
  const modSel = el('modSelect'); const symWrap = el('symptoms');
  if(!modSel || !symWrap) return; // if section not present, do nothing
  [...new Set(routingRules.map(r=>r.module))].forEach(m=>{ const o=document.createElement('option'); o.value=m; o.textContent=m; modSel.appendChild(o); });
  ['Access/Permissions','Configuration','Integration/API','Data Issue','Bug/Unexpected','How-to/Training'].forEach(s=>{
    const b=document.createElement('button'); b.className='menuBtn'; b.style.width='auto'; b.textContent=s; b.onclick=()=>b.classList.toggle('active'); symWrap.appendChild(b);
  });
})();

function tokenize(s){ return (s||'').toLowerCase().split(/[^a-z0-9]+/).filter(Boolean); }
function suggestRoute(){
  const modSel = el('modSelect'), sum = el('summary'), ul = el('probeList'), box = el('routeBox');
  if(!modSel || !sum || !ul || !box) return;
  const mod = modSel.value, summary = (sum.value||'').trim();
  if(!summary){ alert('Please enter an issue summary.'); return; }
  const toks = tokenize(summary);
  const scored = routingRules.map(r=>({r, s: (r.module===mod?0.5:0)+toks.filter(t=>r.signals.includes(t)).length*0.1})).sort((a,b)=>b.s-a.s);
  const top = scored[0]?.r;
  if(!top){ box.textContent='No suggestion.'; return; }
  box.innerHTML = `Recommended queue: <strong>${top.queue}</strong>`;
  ul.innerHTML=''; (top.probing||[]).forEach(q=>{ const li=document.createElement('li'); li.textContent=q; ul.appendChild(li); });
}
function clearCav(){ if(el('summary')) el('summary').value=''; if(el('probeList')) el('probeList').innerHTML=''; if(el('routeBox')) el('routeBox').textContent='Fill the form and click Suggest queue.'; }

// ---- init ----
go('home');
</script>
</body>
</html>
